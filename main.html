<!DOCTYPE html>
<html lang="te">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡∞ú‡±Ü‡∞Ç‡∞°‡∞∞‡±ç ‚Äì ‡∞∏‡∞π‡∞ö‡∞∞‡±Å‡∞≤ ‡∞í‡∞§‡±ç‡∞§‡∞ø‡∞°‡∞ø Quiz</title>

<style>
    body {
        margin: 0;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #89f7fe, #66a6ff);
        text-align: center;
        min-height: 100vh;
        padding-bottom: 40px;
    }
    
    h1 {
        color: white;
        padding: 20px 10px;
        margin: 0;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        animation: float 3s infinite ease-in-out;
    }

    @keyframes float {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-8px); }
    }

    .progress {
        width: 90%;
        max-width: 600px;
        height: 15px;
        background: rgba(255, 255, 255, 0.4);
        border-radius: 20px;
        margin: 10px auto 20px auto;
        box-shadow: inset 0 2px 5px rgba(0,0,0,0.1);
    }

    .progress-bar {
        height: 100%;
        width: 0%;
        background: #4caf50;
        border-radius: 20px;
        transition: width 0.4s ease;
        box-shadow: 0 2px 5px rgba(76, 175, 80, 0.4);
    }

    .container {
        max-width: 600px;
        background: white;
        margin: 0 auto 20px auto;
        padding: 20px;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        text-align: left;
    }

    .question-block {
        margin-bottom: 25px;
        padding-bottom: 15px;
        border-bottom: 1px solid #eee;
    }
    
    .question-block:last-child {
        border-bottom: none;
        margin-bottom: 0;
        padding-bottom: 0;
    }

    .question {
        margin: 0 0 15px 0;
        font-weight: 600;
        font-size: 1.1em;
        color: #333;
    }

    .options button {
        display: block;
        width: 100%;
        margin: 8px 0;
        padding: 12px;
        border: 2px solid #e0e0e0;
        border-radius: 10px;
        cursor: pointer;
        background: #fff;
        font-size: 1em;
        transition: all 0.2s;
        text-align: left;
    }

    .options button:hover:not(:disabled) {
        border-color: #66a6ff;
        background: #f0f6ff;
        transform: translateX(5px);
    }

    .options button:disabled {
        cursor: not-allowed;
        opacity: 0.8;
    }

    /* Success and Error States */
    .correct {
        background: #d4edda !important;
        border-color: #28a745 !important;
        color: #155724 !important;
        font-weight: bold;
    }

    .wrong {
        background: #f8d7da !important;
        border-color: #dc3545 !important;
        color: #721c24 !important;
    }

    .submit {
        background: #ff4081;
        color: white;
        padding: 15px 30px;
        border: none;
        border-radius: 25px;
        font-size: 18px;
        font-weight: bold;
        margin: 20px auto;
        cursor: pointer;
        box-shadow: 0 4px 15px rgba(255, 64, 129, 0.4);
        transition: 0.3s;
        display: none; /* Hidden until quiz is finished */
    }

    .submit:hover {
        transform: translateY(-3px);
        box-shadow: 0 6px 20px rgba(255, 64, 129, 0.6);
    }

    #result {
        font-size: 28px;
        color: white;
        font-weight: bold;
        margin-top: 20px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }

    canvas {
        position: fixed;
        top: 0;
        left: 0;
        pointer-events: none;
        z-index: 1000;
    }
</style>
</head>
<body>

<h1>üéØ ‡∞ú‡±Ü‡∞Ç‡∞°‡∞∞‡±ç ‚Äì ‡∞∏‡∞π‡∞ö‡∞∞‡±Å‡∞≤ ‡∞í‡∞§‡±ç‡∞§‡∞ø‡∞°‡∞ø Quiz üéâ</h1>

<div class="progress">
    <div class="progress-bar" id="progressBar"></div>
</div>

<div class="container" id="quizContainer"></div>

<button class="submit" id="submitBtn" onclick="finishQuiz()">Submit Quiz üéâ</button>

<div id="result"></div>
<canvas id="confetti"></canvas>

<script>
const questions = [
    {q:"1. ‡∞∏‡∞π‡∞ö‡∞∞‡±Å‡∞≤ ‡∞í‡∞§‡±ç‡∞§‡∞ø‡∞°‡∞ø ‡∞Ö‡∞Ç‡∞ü‡±á ‡∞è‡∞Æ‡∞ø‡∞ü‡∞ø?", options:["a) ‡∞â‡∞™‡∞æ‡∞ß‡±ç‡∞Ø‡∞æ‡∞Ø‡±Å‡∞≤ ‡∞í‡∞§‡±ç‡∞§‡∞ø‡∞°‡∞ø", "b) ‡∞∏‡±ç‡∞®‡±á‡∞π‡∞ø‡∞§‡±Å‡∞≤ ‡∞™‡±ç‡∞∞‡∞≠‡∞æ‡∞µ‡∞Ç‡∞§‡±ã ‡∞ï‡∞≤‡∞ø‡∞ó‡±á ‡∞Æ‡∞æ‡∞®‡∞∏‡∞ø‡∞ï ‡∞í‡∞§‡±ç‡∞§‡∞ø‡∞°‡∞ø", "c) ‡∞ï‡±Å‡∞ü‡±Å‡∞Ç‡∞¨ ‡∞®‡∞ø‡∞Ø‡∞Æ‡∞æ‡∞≤‡±Å", "d) ‡∞™‡∞∞‡±Ä‡∞ï‡±ç‡∞∑‡∞≤ ‡∞≠‡∞Ø‡∞Ç"], answer:1},
    {q:"2. ‡∞∏‡∞¨‡∞ø‡∞§‡∞™‡±à ‡∞™‡±ç‡∞∞‡∞≠‡∞æ‡∞µ‡∞Ç ‡∞ö‡±Ç‡∞™‡∞ø‡∞® ‡∞™‡±ç‡∞∞‡∞ß‡∞æ‡∞® ‡∞ï‡∞æ‡∞∞‡∞£‡∞Ç ‡∞è‡∞Æ‡∞ø‡∞ü‡∞ø?", options:["a) ‡∞ö‡∞¶‡±Å‡∞µ‡±Å ‡∞í‡∞§‡±ç‡∞§‡∞ø‡∞°‡∞ø","b) ‡∞´‡±ç‡∞Ø‡∞æ‡∞∑‡∞®‡±ç ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞∏‡±ç‡∞®‡±á‡∞π‡∞ø‡∞§‡±Å‡∞≤ ‡∞™‡±ç‡∞∞‡∞≠‡∞æ‡∞µ‡∞Ç", "c) ‡∞ï‡±Å‡∞ü‡±Å‡∞Ç‡∞¨ ‡∞™‡∞∞‡∞ø‡∞∏‡±ç‡∞•‡∞ø‡∞§‡∞ø","d) ‡∞â‡∞™‡∞æ‡∞ß‡±ç‡∞Ø‡∞æ‡∞Ø‡±Å‡∞≤‡±Å"], answer:1},
    {q:"3. ‡∞Ü‡∞Ø‡±Å‡∞∑‡±ç ‡∞∏‡±ç‡∞®‡±á‡∞π‡∞ø‡∞§‡±Å‡∞≤‡±Å ‡∞è‡∞¶‡∞ø ‡∞Æ‡∞®‡∞ø‡∞∑‡∞ø‡∞§‡∞®‡∞Æ‡∞®‡∞ø ‡∞ö‡±Ü‡∞™‡±ç‡∞™‡∞æ‡∞∞‡±Å?", options:["a) ‡∞¨‡∞æ‡∞ß‡±ç‡∞Ø‡∞§‡∞æ‡∞Ø‡±Å‡∞§ ‡∞ú‡±Ä‡∞µ‡∞ø‡∞§‡∞Ç","b) ‡∞µ‡±ç‡∞Ø‡∞æ‡∞Ø‡∞æ‡∞Æ‡∞Ç", "c) ‡∞™‡±ä‡∞ó ‡∞§‡∞æ‡∞ó‡∞°‡∞Ç","d) ‡∞ö‡∞¶‡±Å‡∞µ‡±Å"], answer:2},
    {q:"4. ‡∞™‡±ä‡∞ó‡∞§‡∞æ‡∞ó‡∞°‡∞Ç ‡∞µ‡∞≤‡±ç‡∞≤ ‡∞á‡∞§‡∞∞‡±Å‡∞≤‡∞ï‡±Å ‡∞ï‡∞≤‡∞ø‡∞ó‡±á ‡∞®‡∞∑‡±ç‡∞ü‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞è‡∞Æ‡∞Ç‡∞ü‡∞æ‡∞∞‡±Å?", options:["a) ‡∞Ø‡∞æ‡∞ï‡±ç‡∞ü‡∞ø‡∞µ‡±ç ‡∞∏‡±ç‡∞Æ‡±ã‡∞ï‡∞ø‡∞Ç‡∞ó‡±ç","b) ‡∞™‡∞æ‡∞∏‡∞ø‡∞µ‡±ç ‡∞∏‡±ç‡∞Æ‡±ã‡∞ï‡∞ø‡∞Ç‡∞ó‡±ç", "c) ‡∞∏‡±ã‡∞∑‡∞ø‡∞Ø‡∞≤‡±ç ‡∞∏‡±ç‡∞Æ‡±ã‡∞ï‡∞ø‡∞Ç‡∞ó‡±ç","d) ‡∞´‡±ç‡∞∞‡±Ä ‡∞∏‡±ç‡∞Æ‡±ã‡∞ï‡∞ø‡∞Ç‡∞ó‡±ç"], answer:1},
    {q:"5. ‡∞∏‡∞π‡∞ö‡∞∞‡±Å‡∞≤ ‡∞í‡∞§‡±ç‡∞§‡∞ø‡∞°‡∞ø ‡∞é‡∞ï‡±ç‡∞ï‡±Å‡∞µ‡∞ó‡∞æ ‡∞ï‡∞®‡∞ø‡∞™‡∞ø‡∞Ç‡∞ö‡±á ‡∞¶‡∞∂ ‡∞è‡∞¶‡∞ø?", options:["a) ‡∞¨‡∞æ‡∞≤‡±ç‡∞Ø‡∞Ç","b) ‡∞ï‡∞ø‡∞∂‡±ã‡∞∞ ‡∞¶‡∞∂", "c) ‡∞µ‡±É‡∞¶‡±ç‡∞ß‡∞æ‡∞™‡±ç‡∞Ø‡∞Ç","d) ‡∞∂‡∞ø‡∞∂‡±Å ‡∞¶‡∞∂"], answer:1},
    {q:"6. ‡∞®‡∞ø‡∞ú‡∞Æ‡±à‡∞® ‡∞Æ‡∞®‡∞ø‡∞∑‡∞ø‡∞§‡∞®‡∞Ç ‡∞è‡∞¶‡∞ø‡∞≤‡±ã ‡∞â‡∞Ç‡∞ü‡±Å‡∞Ç‡∞¶‡∞ø?", options:["a) ‡∞ö‡±Ü‡∞°‡±Å ‡∞Ö‡∞≤‡∞µ‡∞æ‡∞ü‡±ç‡∞≤‡∞≤‡±ã","b) ‡∞¨‡∞æ‡∞ß‡±ç‡∞Ø‡∞§‡∞æ‡∞Ø‡±Å‡∞§ ‡∞ú‡±Ä‡∞µ‡∞®‡∞Ç‡∞≤‡±ã", "c) ‡∞´‡±ç‡∞Ø‡∞æ‡∞∑‡∞®‡±ç‚Äå‡∞≤‡±ã","d) ‡∞∏‡±ç‡∞®‡±á‡∞π‡∞ø‡∞§‡±Å‡∞≤ ‡∞™‡±ç‡∞∞‡∞∂‡∞Ç‡∞∏‡∞≤‡±ã"], answer:1},
    {q:"7. ‡∞∏‡±ã‡∞∑‡∞≤‡±ç ‡∞Æ‡±Ä‡∞°‡∞ø‡∞Ø‡∞æ ‡∞í‡∞§‡±ç‡∞§‡∞ø‡∞°‡∞ø ‡∞™‡±ç‡∞∞‡∞ß‡∞æ‡∞®‡∞Ç‡∞ó‡∞æ ‡∞è ‡∞ï‡∞æ‡∞∞‡∞£‡∞Ç‡∞ó‡∞æ ‡∞™‡±Ü‡∞∞‡±Å‡∞ó‡±Å‡∞§‡±Å‡∞Ç‡∞¶‡∞ø?", options:["a) ‡∞≤‡±à‡∞ï‡±Å‡∞≤‡±Å ‡∞Æ‡∞∞‡∞ø‡∞Ø‡±Å ‡∞™‡±ã‡∞≤‡∞ø‡∞ï‡∞≤‡±Å","b) ‡∞™‡±Å‡∞∏‡±ç‡∞§‡∞ï‡∞æ‡∞≤‡±Å", "c) ‡∞â‡∞™‡∞æ‡∞ß‡±ç‡∞Ø‡∞æ‡∞Ø‡±Å‡∞≤‡±Å","d) ‡∞ï‡±ç‡∞∞‡±Ä‡∞°‡∞≤‡±Å"], answer:0},
    {q:"8. ‡∞ú‡±Ü‡∞Ç‡∞°‡∞∞‡±ç ‡∞Ö‡∞™‡±ã‡∞π‡∞≤‡±Å ‡∞Ö‡∞Ç‡∞ü‡±á ‡∞è‡∞Æ‡∞ø‡∞ü‡∞ø?", options:["a) ‡∞∏‡∞Æ‡∞æ‡∞®‡∞§‡±ç‡∞µ ‡∞≠‡∞æ‡∞µ‡∞®","b) ‡∞π‡∞ï‡±ç‡∞ï‡±Å‡∞≤‡±Å", "c) ‡∞§‡∞™‡±ç‡∞™‡±Å‡∞¶‡∞æ‡∞∞‡∞ø ‡∞™‡∞ü‡±ç‡∞ü‡∞ø‡∞Ç‡∞ö‡±á ‡∞®‡∞Æ‡±ç‡∞Æ‡∞ï‡∞æ‡∞≤‡±Å","d) ‡∞ö‡∞ü‡±ç‡∞ü‡∞æ‡∞≤‡±Å"], answer:2},
    {q:"9. ‡∞∏‡∞π‡∞ö‡∞∞‡±Å‡∞≤ ‡∞í‡∞§‡±ç‡∞§‡∞ø‡∞°‡∞ø‡∞®‡∞ø ‡∞ú‡∞Ø‡∞ø‡∞Ç‡∞ö‡∞°‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞Æ‡±Å‡∞ñ‡±ç‡∞Ø‡∞Æ‡±à‡∞® ‡∞≤‡∞ï‡±ç‡∞∑‡∞£‡∞Ç ‡∞è‡∞Æ‡∞ø‡∞ü‡∞ø?", options:["a) ‡∞≠‡∞Ø‡∞Ç","b) ‡∞Ü‡∞§‡±ç‡∞Æ‡∞µ‡∞ø‡∞∂‡±ç‡∞µ‡∞æ‡∞∏‡∞Ç", "c) ‡∞Ö‡∞®‡±Å‡∞ï‡∞∞‡∞£","d) ‡∞¶‡∞æ‡∞ö‡∞ø‡∞™‡±Ü‡∞ü‡±ç‡∞ü‡∞°‡∞Ç"], answer:1},
    {q:"10. ‡∞∏‡∞∞‡±à‡∞® ‡∞®‡∞ø‡∞∞‡±ç‡∞£‡∞Ø‡∞æ‡∞≤‡±Å ‡∞§‡±Ä‡∞∏‡±Å‡∞ï‡±ã‡∞µ‡∞°‡∞Ç ‡∞¶‡∞æ‡∞∞‡∞ø ‡∞§‡±Ä‡∞∏‡±á‡∞¶‡∞ø ‡∞è‡∞¶‡∞ø‡∞ï‡∞ø?", options:["a) ‡∞™‡±ç‡∞∞‡∞Æ‡∞æ‡∞¶‡∞ï‡∞∞ ‡∞ú‡±Ä‡∞µ‡∞ø‡∞§‡∞Ç","b) ‡∞∏‡±Å‡∞∞‡∞ï‡±ç‡∞∑‡∞ø‡∞§ ‡∞≠‡∞µ‡∞ø‡∞∑‡±ç‡∞Ø‡∞§‡±ç‡∞§‡±Å", "c) ‡∞í‡∞§‡±ç‡∞§‡∞ø‡∞°‡∞ø","d) ‡∞ó‡±ä‡∞°‡∞µ‡∞≤‡±Å"], answer:1},
    {q:"11. ‡∞∏‡∞π‡∞ö‡∞∞‡±Å‡∞≤ ‡∞í‡∞§‡±ç‡∞§‡∞ø‡∞°‡∞ø ‡∞∏‡±ç‡∞®‡±á‡∞π‡∞ø‡∞§‡±Å‡∞≤ ‡∞™‡±ç‡∞∞‡∞≠‡∞æ‡∞µ‡∞Ç‡∞§‡±ã ‡∞ï‡∞≤‡±Å‡∞ó‡±Å‡∞§‡±Å‡∞Ç‡∞¶‡∞ø.", options:["‡∞∏‡∞§‡±ç‡∞Ø‡∞Ç","‡∞Ö‡∞∏‡∞§‡±ç‡∞Ø‡∞Ç"], answer:0},
    {q:"12. ‡∞ñ‡∞∞‡±Ä‡∞¶‡±à‡∞® ‡∞¨‡∞ü‡±ç‡∞ü‡∞≤‡±Å ‡∞µ‡±á‡∞∏‡±Å‡∞ï‡±Å‡∞Ç‡∞ü‡±á‡∞®‡±á ‡∞Æ‡∞®‡∞ø‡∞∑‡∞ø ‡∞µ‡∞ø‡∞≤‡±Å‡∞µ ‡∞™‡±Ü‡∞∞‡±Å‡∞ó‡±Å‡∞§‡±Å‡∞Ç‡∞¶‡∞ø.", options:["‡∞∏‡∞§‡±ç‡∞Ø‡∞Ç","‡∞Ö‡∞∏‡∞§‡±ç‡∞Ø‡∞Ç"], answer:1},
    {q:"13. ‡∞™‡±ä‡∞ó‡∞§‡∞æ‡∞ó‡∞°‡∞Ç ‡∞Ü‡∞∞‡±ã‡∞ó‡±ç‡∞Ø‡∞æ‡∞®‡∞ø‡∞ï‡∞ø ‡∞π‡∞æ‡∞®‡∞ø‡∞ï‡∞∞‡∞Ç ‡∞ï‡∞æ‡∞¶‡±Å.", options:["‡∞∏‡∞§‡±ç‡∞Ø‡∞Ç","‡∞Ö‡∞∏‡∞§‡±ç‡∞Ø‡∞Ç"], answer:1},
    {q:"14. ‡∞â‡∞™‡∞æ‡∞ß‡±ç‡∞Ø‡∞æ‡∞Ø‡±Å‡∞≤ ‡∞∏‡∞∞‡±à‡∞® ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ó‡∞¶‡∞∞‡±ç‡∞∂‡∞®‡∞Ç ‡∞™‡∞ø‡∞≤‡±ç‡∞≤‡∞≤‡∞®‡±Å ‡∞Æ‡∞æ‡∞∞‡±ç‡∞ö‡∞ó‡∞≤‡∞¶‡±Å.", options:["‡∞∏‡∞§‡±ç‡∞Ø‡∞Ç","‡∞Ö‡∞∏‡∞§‡±ç‡∞Ø‡∞Ç"], answer:0},
    {q:"15. ‡∞∏‡±ã‡∞∑‡∞≤‡±ç ‡∞Æ‡±Ä‡∞°‡∞ø‡∞Ø‡∞æ‡∞≤‡±ã ‡∞ï‡∞®‡∞ø‡∞™‡∞ø‡∞Ç‡∞ö‡±á‡∞¶‡∞Ç‡∞§‡∞æ ‡∞®‡∞ø‡∞ú‡∞Ç.", options:["‡∞∏‡∞§‡±ç‡∞Ø‡∞Ç","‡∞Ö‡∞∏‡∞§‡±ç‡∞Ø‡∞Ç"], answer:1},
    {q:"16. ‚Äú‡∞≤‡±á‡∞¶‡±Å‚Äù ‡∞Ö‡∞®‡∞ø ‡∞ö‡±Ü‡∞™‡±ç‡∞™‡∞°‡∞Ç ‡∞®‡±á‡∞∞‡±ç‡∞ö‡±Å‡∞ï‡±ã‡∞µ‡∞°‡∞Ç ‡∞Ö‡∞µ‡∞∏‡∞∞‡∞Ç.", options:["‡∞∏‡∞§‡±ç‡∞Ø‡∞Ç","‡∞Ö‡∞∏‡∞§‡±ç‡∞Ø‡∞Ç"], answer:0}
];

let score = 0;
let answered = 0;
const container = document.getElementById("quizContainer");
const submitBtn = document.getElementById("submitBtn");

questions.forEach((item, index) => {
    // Create a block for each question
    let blockDiv = document.createElement("div");
    blockDiv.className = "question-block";

    // Add question text
    let qDiv = document.createElement("div");
    qDiv.className = "question";
    qDiv.innerText = item.q;
    blockDiv.appendChild(qDiv);

    // Add options container
    let optDiv = document.createElement("div");
    optDiv.className = "options";

    item.options.forEach((opt, i) => {
        let btn = document.createElement("button");
        btn.innerText = opt;
        
        btn.onclick = function() {
            // Prevent clicking again if this question block is already answered
            if (optDiv.classList.contains("answered")) return;
            optDiv.classList.add("answered");

            // Disable all buttons in this specific question
            const allButtons = optDiv.querySelectorAll("button");
            allButtons.forEach(b => b.disabled = true);

            // Check if correct
            if (i === item.answer) {
                btn.classList.add("correct");
                score++;
            } else {
                btn.classList.add("wrong");
                // Reveal the correct answer to the user
                allButtons[item.answer].classList.add("correct");
            }

            answered++;
            updateProgress();

            // Show submit button only when all questions are answered
            if(answered === questions.length) {
                submitBtn.style.display = "inline-block";
                // Smooth scroll down to the submit button
                submitBtn.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        };
        optDiv.appendChild(btn);
    });
    
    blockDiv.appendChild(optDiv);
    container.appendChild(blockDiv);
});

// Update Progress bar
function updateProgress() {
    let percent = (answered / questions.length) * 100;
    document.getElementById("progressBar").style.width = percent + "%";
}

// Finish Quiz
function finishQuiz() {
    let resultDiv = document.getElementById("result");
    resultDiv.innerHTML = "üéâ ‡∞®‡±Ä ‡∞∏‡±ç‡∞ï‡±ã‡∞∞‡±ç: " + score + " / " + questions.length;
    resultDiv.scrollIntoView({ behavior: 'smooth', block: 'center' });
    
    submitBtn.style.display = "none"; // Hide submit button after clicking
    startConfetti();
}

// Colorful, improved Confetti System
function startConfetti() {
    const canvas = document.getElementById("confetti");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    
    let pieces = [];
    const colors = ['#f44336', '#e91e63', '#9c27b0', '#673ab7', '#3f51b5', '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#4CAF50', '#8BC34A', '#CDDC39', '#FFEB3B', '#FFC107', '#FF9800', '#FF5722'];

    for (let i = 0; i < 200; i++) {
        pieces.push({
            x: Math.random() * canvas.width,
            y: Math.random() * canvas.height - canvas.height, // Start above screen
            w: Math.random() * 10 + 5, // width
            h: Math.random() * 5 + 2,  // height
            color: colors[Math.floor(Math.random() * colors.length)],
            speedY: Math.random() * 3 + 2,
            speedX: Math.random() * 2 - 1,
            rotation: Math.random() * 360,
            rotationSpeed: Math.random() * 10 - 5
        });
    }

    let animationId;

    function draw() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        let activePieces = 0;

        pieces.forEach(p => {
            if (p.y < canvas.height) {
                activePieces++;
                ctx.save();
                ctx.translate(p.x, p.y);
                ctx.rotate(p.rotation * Math.PI / 180);
                ctx.fillStyle = p.color;
                ctx.fillRect(-p.w / 2, -p.h / 2, p.w, p.h);
                ctx.restore();

                p.y += p.speedY;
                p.x += p.speedX;
                p.rotation += p.rotationSpeed;
            }
        });

        if (activePieces > 0) {
            animationId = requestAnimationFrame(draw);
        } else {
            cancelAnimationFrame(animationId);
            ctx.clearRect(0, 0, canvas.width, canvas.height); // clear at the end
        }
    }
    
    draw();
}
</script>

</body>
</html>
